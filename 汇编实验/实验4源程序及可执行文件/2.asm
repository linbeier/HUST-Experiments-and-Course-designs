	NAME N4
	EXTRN _PARA1:WORD
	PUBLIC _SOR
.386
INCLUDE MARCO.LIB
STACK0
STUDENT STRUCT
	DB 11,?,11 DUP(0)
	DB 0,0,0,?
	DW 0
STUDENT ENDS
DATA4 SEGMENT USE16 PARA PUBLIC 'D5'
CM   STUDENT <>
N   EQU 5
DATA4 ENDS
_TEXT    SEGMENT  USE16  PUBLIC 'CODE'
		ASSUME CS:_TEXT,ES:DATA4,SS:STACK
_SOR PROC
	MOV SI,DS:_PARA1
	MOV BX,OFFSET CM
	MOV CH,N
SIZ2:
	MOV DI,SI
	MOV CL,CH
	DEC CL
SIZ1:
	ADD DI,19
	MOV AL,16[SI]
	CMP AL,16[DI]
	JGE NEXC
	PUSH SI
	PUSH BX
	PUSH DI
	CALL EXCH
NEXC:
	DEC CL
	JNZ SIZ1
	ADD SI,19
	DEC CH
	CMP CH,1
	JA SIZ2
	MOV SI,DS:_PARA1
	MOV CX,1
SIZ3:
	MOV 17[SI],CX
	ADD SI,19
	INC CX
	CMP CX,N
	JA ENDSO
	JMP SIZ3
ENDSO:
	RET
_SOR ENDP
;----------------------
EXCH PROC
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH SI
	PUSH DI
	PUSH BP
	MOV BP,SP
	MOV DI,14[BP]
	MOV BX,16[BP]
	MOV SI,18[BP]
	MOV CX,19
CH1:
	MOV AL,BYTE PTR [SI]
	MOV BYTE PTR ES:[BX],AL
	INC SI
	INC BX
	DEC CX
	JNZ CH1
	MOV BX,16[BP]
	MOV SI,18[BP]
	MOV CX,19
CH2:
	MOV AL,BYTE PTR [DI]
	MOV BYTE PTR [SI],AL
	INC SI
	INC DI
	DEC CX
	JNZ CH2
	MOV SI,18[BP]
	MOV DI,14[BP]
	MOV CX,19
CH3:
	MOV AL,BYTE PTR ES:[BX]
	MOV BYTE PTR [DI],AL
	INC DI
	INC BX
	DEC CX
	JNZ CH3
	POP BP
	POP DI
	POP SI
	POP CX
	POP BX
	POP AX
	RET 6
EXCH ENDP
_TEXT ENDS
	END
